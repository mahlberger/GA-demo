Note 1: This readme is created with ambition to create a simple guide to start development with a specific set of tools. Other tools and/or techniques might be used but that will probably require a different set up. These are the current techniques used and those can be questioned or changed:

- Apollo Client (graphql client)
- Visual Studio Code (with selected plugins)
  - Some selected node packages and config files to work with those specific plugins
- yarn as package manager
- Graphql Codegen
- Typescript
- Create-react-app as base toolchain (no eject)

Note 2: This specific repo is just a demonstration and experimental codebase for testing purposes.

# Scripts

Start development server:

`yarn start`

Update types and introspection of graphql client and remote schema:

`yarn codegen`

# Working with graphql

Following examples make sence for use with Apollo Client. Another client library will probably require different tooling and examples.

## Schemas and generation

There are two schemas defined, one is remote and one is local, reffered to client schema. Client schema is used to define local only variables, queries or mutations. These are, by GraphQL Codegen ( `yarn codegen` ), merged to two sources of truth:

- schemaTypes.tsx - The typescript reference for getting correct types for output variables and input parameter when doing graphql operations. There will also be hooks generated for locally written queries (see: Writing queries)
- schemaIntrospection.json - reference for getting autoCompletition when writing queries.

## Writing operations (queries, mutations, fragments?)

TODO: organize /src/graphql folder

Operations created in /src/graphql/queries/\*.graphql could either be used by import of gql document or with autogenerated hooks by `yarn codegen` which are both created in /src/generated/schemaTypes.tsx.

Example query that will generate GetProductsDocument and useGetProductsQuery():

```
query GetProducts {
  viewer {
    productList {
      _id
      name
    }
  }
}
```

# Developer environment

## Expectations

## Tooling

For best developer experience (the only one tested) is with following:

- Visual Studio Code
  - Plugin: Prettier - Code formatter https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode
  - Plugin: ESLint https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint
  - Plugin: GraphQL https://marketplace.visualstudio.com/items?itemName=GraphQL.vscode-graphql
  - Settings:
    - User: Turn on "Format On Save"
    - Formatting preference and eslint --fix is set in workspace (managed by git)
